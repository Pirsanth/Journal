!function o(r,i,d){function l(t,e){if(!i[t]){if(!r[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var a=i[t]={exports:{}};r[t][0].call(a.exports,function(e){return l(r[t][1][e]||e)},a,a.exports,o,r,i,d)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<d.length;e++)l(d[e]);return l}({1:[function(e,t,s){"use strict";var n,a,o,r,i,d,l,u,c,p;!function(e){var t=e.App?e.App:e.App={},s=(document.querySelector("[data-form-container]"),document.querySelector("[data-button-mode-login]")),n=document.querySelector("[data-button-mode-register]"),a=document.querySelector("[data-start-button]"),o=document.querySelector("[data-mode-bar]");function r(){}r.prototype.addRegisterButtonHandler=function(t){n.addEventListener("click",function(e){o.classList.add("register"),t()})},r.prototype.addLoginButtonHandler=function(t){s.addEventListener("click",function(e){o.classList.remove("register"),t()})},r.prototype.addStartButtonHandler=function(t){a.addEventListener("click",function(e){t()})},t.ButtonControls=r}(window),function(e){var t=e.App?e.App:e.App={},s=document.forms[0].offset,n=document.forms[0].password,a=document.forms[0].repeatPassword,o=document.forms[0].username;function r(){this.infoBox=document.querySelector("[data-info-box]"),this.formElement=document.forms[0],this.repeatPasswordContainer=document.querySelector("[data-repeat-password-container]"),this.formContainer=document.querySelector("[data-form-container]"),this.isRegistrationMode=!1,this.doesTheUserExist=null}function i(e){return e.parentElement.parentElement.classList.contains("showFailure")}r.prototype.removeInfoBox=function(){this.formElement.removeChild(this.infoBox),this.infoBox=null},r.prototype.addOffsetToHiddenInput=function(){var e=new Date;s.value=e.getTimezoneOffset()},r.prototype.addPasswordOnBlurHandler=function(t){n.addEventListener("blur",function(e){t(n)})},r.prototype.addRepeatPasswordOnBlurHandler=function(t){a.addEventListener("blur",function(e){t(n,a)})},r.prototype.showFailureMessage=function(e,t){e.nextElementSibling.nextElementSibling.lastElementChild.textContent=t;var s=e.parentElement.parentElement;s.classList.remove("showSuccess"),s.classList.add("showFailure")},r.prototype.showSuccessMessage=function(e){var t=e.parentElement.parentElement;t.classList.remove("showFailure"),t.classList.add("showSuccess")},r.prototype.enableRepeatPasswordField=function(){a.disabled=!1},r.prototype.disableRepeatPasswordField=function(){a.disabled=!0},r.prototype.addUsernameOnBlurHandler=function(e){o.addEventListener("blur",function(){e(o)})},r.prototype.showUsernameValidityMessageFromInternalState=function(){this.isRegistrationMode?this.doesTheUserExist?this.showFailureMessage(o,"Username taken please try another"):this.showSuccessMessage(o):this.doesTheUserExist?this.showSuccessMessage(o):this.showFailureMessage(o,"User does not exist")},r.prototype.ensureCorrectUsernameValidityOnModeChange=function(){null!==this.doesTheUserExist&&this.showUsernameValidityMessageFromInternalState()},r.prototype.changeUsernameIsValidValidityMessage=function(){var e=o.nextElementSibling.lastElementChild;this.isRegistrationMode?e.textContent="Username is available":e.textContent="Username is valid"},r.prototype.addSubmitEventHandler=function(){var t=this;this.formElement.addEventListener("submit",function(e){t.showRelevantValidityMessages(),t.areAllFormFieldsValid()||e.preventDefault()})},r.prototype.showRelevantValidityMessages=function(){o.focus(),o.blur(),n.focus(),n.blur(),this.isRegistrationMode&&(a.focus(),a.blur())},r.prototype.areAllFormFieldsValid=function(){return!i(o)&&(!i(n)&&(!this.isRegistrationMode||!i(a)))},r.prototype.updateRepeatPasswordValidityInCaseTheyNowDoNotMatch=function(e){a.validity.valid&&e(a)},t.Form=r}(window),n=window,a=n.App?n.App:n.App={},o="".concat("baseURL","/doesUserExist"),a.ValidationFunctions={validatePassword:function(e){return e.validity.valid?{isValid:!0}:e.value?{isValid:!1,message:"Passwords have to be at least 4 characters long"}:{isValid:!1,message:"Required"}},validateRepeatPassword:function(e,t){return t.value?t.validity.valid?e.value!==t.value?{isValid:!1,message:"Passwords do not match"}:{isValid:!0}:{isValid:!1,message:"Passwords have to be at least 4 characters long"}:{isValid:!1,message:"Required"}},sendGETWithProspectiveUsername:function(e,s){var t=new XMLHttpRequest;t.open("POST",o),t.setRequestHeader("Content-Type","application/json");var n={username:e};t.onload=function(){var e=JSON.parse(this.responseText);if(e.error)console.log("".concat(e.error," : ").concat(e.message));else{var t=e.data;s(t)}},t.send(JSON.stringify(n))}},r=window,i=new r.App.ButtonControls,d=new r.App.Form,l=r.App.ValidationFunctions,u=l.validatePassword,c=l.validateRepeatPassword,p=l.sendGETWithProspectiveUsername,i.addRegisterButtonHandler(function(){d.infoBox&&d.removeInfoBox(),d.formElement.action="processRegistration",d.repeatPasswordContainer.classList.remove("hideRepeat"),d.enableRepeatPasswordField(),d.isRegistrationMode=!0,d.changeUsernameIsValidValidityMessage(),d.ensureCorrectUsernameValidityOnModeChange()}),i.addLoginButtonHandler(function(){d.formElement.action="processLogin",d.repeatPasswordContainer.classList.add("hideRepeat"),d.disableRepeatPasswordField(),d.isRegistrationMode=!1,d.changeUsernameIsValidValidityMessage(),d.ensureCorrectUsernameValidityOnModeChange()}),i.addStartButtonHandler(function(){d.formContainer.classList.add("expand")}),d.addOffsetToHiddenInput(),d.addPasswordOnBlurHandler(function(e){var t=u(e),s=t.isValid,n=t.message;s?(d.showSuccessMessage(e),d.updateRepeatPasswordValidityInCaseTheyNowDoNotMatch(function(e){e.focus(),e.blur()})):d.showFailureMessage(e,n)}),d.addRepeatPasswordOnBlurHandler(function(e,t){var s=c(e,t),n=s.isValid,a=s.message;n?d.showSuccessMessage(t):d.showFailureMessage(t,a)}),d.addUsernameOnBlurHandler(function(e){e.value?p(e.value,function(e){d.doesTheUserExist=e,d.showUsernameValidityMessageFromInternalState()}):d.showFailureMessage(e,"Required")}),d.addSubmitEventHandler()},{}]},{},[1]);
//# sourceMappingURL=loginPage.min.js.map
